<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.github.itdachen.admin.mapper.IPermsAuthMapper">

    <!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.github.itdachen.admin.sdk.vo.PermsAuthVo" id="permsAuthMap">
            <result property="id" column="id"/>
            <result property="userId" column="user_id"/>
            <result property="menuId" column="menu_id"/>
    </resultMap>

    <sql id="selectPermsAuthVo">
        SELECT id, user_id, menu_id
        FROM sys_perms_auth
    </sql>

    <!-- 集合查询 -->
    <select id="page" parameterType="com.github.itdachen.admin.sdk.query.PermsAuthQuery" resultMap="permsAuthMap">
        <include refid="selectPermsAuthVo"/>
        <where>
            <if test="null != userId  and '' != userId ">
                AND user_id = #{userId}
            </if>
            <if test="null != menuId  and '' != menuId ">
                AND menu_id = #{menuId}
            </if>
        </where>
        ORDER BY id DESC
    </select>


    <!-- 批量添加 -->
    <insert id="batchSave" parameterType="java.util.List">
        INSERT INTO sys_perms_auth (id        , user_id        , menu_id)
        (
        <foreach collection="list" item="item" separator="UNION ALL">
            SELECT
                #{item.id}, 
                #{item.userId}, 
                #{item.menuId}
            FROM DUAL
        </foreach>
        )
    </insert>

    <!-- 批量更新 -->
    <update id="batchUpdate" parameterType="java.util.List">
        <foreach collection="list" item="item" index="index" open="" close="" separator=";">
            UPDATE  sys_perms_auth
            <set>
                        <if test="null != item.id  and '' != item.id ">id =
                            #{item.id},
                        </if>
                        <if test="null != item.userId  and '' != item.userId ">user_id =
                            #{item.userId},
                        </if>
                        <if test="null != item.menuId  and '' != item.menuId ">menu_id =
                            #{item.menuId},
                        </if>
            </set>
            WHERE id = #{item.id}
        </foreach>
    </update>


</mapper>